from aiogram.types import InlineKeyboardMarkup, InlineKeyboardButton

# –ö–Ω–æ–ø–∫–∞ "–ó–∞–ø—Ä–æ—Å–∏—Ç—å –¥–æ—Å—Ç—É–ø" (–¥–ª—è —Ä–æ–ª–∏ 50)
def request_access_keyboard() -> InlineKeyboardMarkup:
    keyboard = InlineKeyboardMarkup(inline_keyboard=[
        [
            InlineKeyboardButton(
                text="üîì –ó–∞–ø—Ä–æ—Å–∏—Ç—å –¥–æ—Å—Ç—É–ø",
                callback_data="request_access"
            )
        ]
    ])
    return keyboard

def build_main_menu(role_id: int) -> InlineKeyboardMarkup:
    buttons = []

    # –û–±—â–∏–µ –∫–Ω–æ–ø–∫–∏
    buttons.append(
        [InlineKeyboardButton(text="üìã –ú–µ–Ω—é", callback_data="user_menu")],
        )
    buttons.append(
        [InlineKeyboardButton(text="üîç –ü–æ–∏—Å–∫ –¥–æ–º–∞", callback_data="find_house")],
        )
    

    # –ê–¥–º–∏–Ω—Å–∫–∏–µ –∫–Ω–æ–ø–∫–∏ (—Ä–æ–ª—å < 3)
    if role_id < 3:
        buttons.append([
            InlineKeyboardButton(text="üõ† –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ", callback_data="admin_panel")
        ])

    return InlineKeyboardMarkup(inline_keyboard=buttons)


def select_role_keyboard():
    return InlineKeyboardMarkup(inline_keyboard=[
        [InlineKeyboardButton(text="üß† –†–ù (–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è)", callback_data="role_rn")],
        [InlineKeyboardButton(text="üß∞ –†–ì–ö–° (–†—É–∫. –≥—Ä—É–ø–ø—ã –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞)", callback_data="role_rgks")],
        [InlineKeyboardButton(text="üîß –°–ò (–°—Ç–∞—Ä—à–∏–π –∏–Ω–∂–µ–Ω–µ—Ä)", callback_data="role_si")]
    ])

def build_approval_keyboard(user_id: int, role_id: int, target: str) -> InlineKeyboardMarkup:
    return InlineKeyboardMarkup(inline_keyboard=[
        [
            InlineKeyboardButton(
                text="‚úÖ –û–¥–æ–±—Ä–∏—Ç—å",
                callback_data=f"approve:{user_id}:{role_id}:{target}"
            ),
            InlineKeyboardButton(
                text="‚ùå –û—Ç–∫–ª–æ–Ω–∏—Ç—å",
                callback_data=f"reject:{user_id}:{role_id}:{target}"
            )
        ]
    ])



def get_admin_menu() -> InlineKeyboardMarkup:
    keyboard = [
        [InlineKeyboardButton(text="‚ûï –ì–ö–°", callback_data="admin:gks_menu")],
        [InlineKeyboardButton(text="‚ûï –†–∞–π–æ–Ω—ã", callback_data="admin:zone_menu")],
        [InlineKeyboardButton(text="‚ûï –î–æ–±–∞–≤–∏—Ç—å –ñ–≠–£", callback_data="add_housing_office")],
        [InlineKeyboardButton(text="‚Ü©Ô∏è –ù–∞–∑–∞–¥", callback_data="start")],
    ]
    return InlineKeyboardMarkup(inline_keyboard=keyboard)


def get_list_zones_menu() -> InlineKeyboardMarkup:
    keyboard = [
        [InlineKeyboardButton(text="‚ûï –î–æ–±–∞–≤–∏—Ç—å —Ä–∞–π–æ–Ω", callback_data="admin:add_zone")],
        [InlineKeyboardButton(text="‚Ü©Ô∏è –ù–∞–∑–∞–¥", callback_data="admin_panel")]
    ]
    return InlineKeyboardMarkup(inline_keyboard=keyboard)



def get_list_gks_menu() -> InlineKeyboardMarkup:
    keyboard = [
        [InlineKeyboardButton(text="‚ûï –î–æ–±–∞–≤–∏—Ç—å –ì–ö–°", callback_data="admin:add_gks")],
        [InlineKeyboardButton(text="‚Ü©Ô∏è –ù–∞–∑–∞–¥", callback_data="admin_panel")]
    ]
    return InlineKeyboardMarkup(inline_keyboard=keyboard)


def get_confirm_add_keyboard() -> InlineKeyboardMarkup:
    keyboard = [
        [
            InlineKeyboardButton(text="‚úÖ –î–æ–±–∞–≤–∏—Ç—å –≤ –±–∞–∑—É", callback_data="confirm_add_house"),
            InlineKeyboardButton(text="‚ùå –û—Ç–º–µ–Ω–∞", callback_data="start"),
        ]
    ]
    return InlineKeyboardMarkup(inline_keyboard=keyboard)


from aiogram.types import InlineKeyboardMarkup, InlineKeyboardButton

def get_list_houses_menu(housing_office_id: int | None, house_id: int) -> InlineKeyboardMarkup:
    keyboard = [
        [InlineKeyboardButton(text="‚ÑπÔ∏è –ü–æ–¥—Ä–æ–±–Ω–æ", callback_data="house:details")],
        [InlineKeyboardButton(text="‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å", callback_data="house:edit")],
    ]
    if housing_office_id is None:
        keyboard.append([
            InlineKeyboardButton(
                text="üîó –ü—Ä–∏–≤—è–∑–∞—Ç—å –ñ–≠–£",
                callback_data=f"attach_housing_office:{house_id}"
            )
        ])
    keyboard.append([
        InlineKeyboardButton(text="‚Ü©Ô∏è –ù–∞–∑–∞–¥", callback_data="start")
    ])
    return InlineKeyboardMarkup(inline_keyboard=keyboard)


def get_confirm_add_housing_office_keyboard():
    return InlineKeyboardMarkup(inline_keyboard=[
        [
            InlineKeyboardButton(text="‚úÖ –î–æ–±–∞–≤–∏—Ç—å", callback_data="add_housing_office_confirm"),
            InlineKeyboardButton(text="‚Ü©Ô∏è –û—Ç–º–µ–Ω–∞", callback_data="start"),
        ]
    ])